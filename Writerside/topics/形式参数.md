# 形式参数

在 C++ 中，当我们说一个函数**期望**接受某种类型的参数时，指的是该函数的参数类型决定了它可以接受什么样的值类别（左值或右值）。让我们具体看一下右值引用和左值引用的期望以及它们之间的区别。

### 1. **右值引用参数 (`std::thread&& t`)**
- **期望右值**：当函数的参数是右值引用（如 `std::thread&& t`），它表示这个函数期望接收一个**右值**，比如一个临时对象，或是通过 `std::move` 转换后的对象。
	- **右值**：右值是那些没有明确名称、且只能在当前表达式中使用的值，比如临时对象、字面值（如 `5`、`"Hello"` 等），或者是通过 `std::move` 转换的对象。
	- **右值引用的作用**：右值引用允许函数以**转移语义**的方式接收右值，从而避免不必要的拷贝。调用该函数时可以对右值进行资源转移（如指针或动态内存的所有权）。
	- **示例**：
	  ```C++
	  void process(std::thread&& t); // 期望右值引用

	  std::thread th(...);
	  process(std::move(th)); // 通过 std::move 转换为右值
	  ```

### 2. **左值引用参数 (`std::thread& t`)**
- **期望左值**：当函数的参数是左值引用（如 `std::thread& t`），它表示函数**期望**接收一个**左值**，即一个具有明确名称的、可以在多处使用的对象。
	- **左值**：左值是那些有明确的名称，可以在多个表达式中重复使用的值，例如变量名、对象等。
	- **左值引用的作用**：左值引用允许函数操作传入的对象（通常是可变对象），而无需进行拷贝。函数会直接使用该对象的内存，不会创建新副本。
	- **示例**：
	  ```C++
	  void process(std::thread& t); // 期望左值引用

	  std::thread th(...);
	  process(th); // 传入左值
	  ```

### 3. **值传递（传值参数，`std::thread t`）**
- **期望传值**：当函数的参数是按值传递（如 `std::thread t`），函数**期望**接收一个对象的**副本**。无论传递的是左值还是右值，都会在函数内部创建一个新的副本。
	- **左值传值**：传递左值时，按值传递会调用拷贝构造函数。
	- **右值传值**：传递右值时，按值传递可以调用移动构造函数，避免昂贵的拷贝操作。
	- **示例**：
	  ```C++
	  void process(std::thread t); // 按值传递

	  std::thread th(...);
	  process(th);           // 调用拷贝构造函数（左值）
	  process(std::move(th)); // 调用移动构造函数（右值）
	  ```

### 期望解释：
- **右值引用**：函数“期望”接收一个右值，表示函数打算“转移”该对象的资源。
- **左值引用**：函数“期望”接收一个左值，表示函数打算直接使用传入的对象，不创建副本。
- **按值传递**：函数“期望”创建一个传入对象的副本，左值会拷贝，右值会移动。

### 总结：
- 右值引用函数期望接收一个右值，通常用于转移资源。
- 左值引用函数期望接收一个左值，通常用于修改对象。
- 按值传递会创建传入对象的副本，无论是左值还是右值。