# 类的虚函数

虚函数是实现多态性的关键机制之一。

1. **虚函数的定义**：
    - 虚函数是通过在基类中使用关键字 `virtual` 声明的成员函数。
    - 当派生类重写基类的虚函数时，可以通过派生类的指针或引用来调用重写的版本。

2. **如何声明虚函数**：
   ```C++
   class Base {
   public:
       virtual void show() {
           std::cout << "Base show" << std::endl;
       }
   };
   ```

3. **如何重写虚函数**：
    - 在派生类中，你可以重写基类中声明的虚函数。
    - 使用相同的函数签名。
   ```C++
   class Derived : public Base {
   public:
       void show() override {  // 使用 C++11 的 override 关键字
           std::cout << "Derived show" << std::endl;
       }
   };
   ```

4. **虚函数的多态性**：
    - 通过基类的指针或引用调用虚函数时，运行时（动态地）决定调用哪个版本的函数，这是多态性的体现。

5. **虚析构函数**：
    - 如果一个类有虚函数，通常它的析构函数也应该是虚的，这样可以确保通过基类指针删除派生类对象时能正确调用派生类的析构函数。

6. **纯虚函数和抽象类**：
    - 纯虚函数是在基类中声明但没有实现的虚函数，用 `= 0` 表示。
    - 含有纯虚函数的类是抽象类，不能被实例化。

7. **性能注意事项**：
    - 虚函数调用相比普通函数调用有额外开销，因为需要通过虚函数表来查找具体的函数实现。

这些是关于C++虚函数的基本概念。理解并正确使用虚函数对于掌握C++面向对象编程非常重要。