# 操作系统的预处理

## 预处理
当调用一个程序时，操作系统会进行一系列的“预处理”步骤，以确保程序能够顺利运行。这些步骤包括但不限于：

1. **命令解析**：操作系统首先解析用户在命令行输入的命令和参数，识别出要执行的程序名及跟随的参数列表。

2. **程序定位**：确定程序的完整路径。如果用户提供的不是一个绝对路径，操作系统会在环境变量如`PATH`指定的目录列表中搜索对应的可执行文件。

3. **加载程序**：找到程序后，操作系统将其从磁盘加载到内存中。这个过程可能涉及内存分配、页面映射等操作。

4. **初始化环境**：为程序创建一个新的进程，包括分配独立的虚拟地址空间、设置栈和堆区域、复制或共享父进程的某些资源（如环境变量）。

5. **设置命令行参数和环境变量**：如前所述，操作系统会根据用户输入构造`argc`和`argv`，并将当前环境变量的副本（或其他指定环境）传递给新进程。

6. **权限检查和安全措施**：操作系统还会执行必要的权限检查，确保当前用户或进程有权限执行该程序，并可能实施各种安全策略，如沙箱机制等。

7. **执行转移**：一切准备就绪后，操作系统将控制权转交给程序的入口点，即C++程序中的`main`函数。

这些步骤概括了从用户发出命令到程序实际开始执行之间，操作系统所承担的“预处理”工作。