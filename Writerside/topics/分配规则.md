# 分配规则

内存重新分配（Memory Reallocation）通常意味着在堆上寻找一块新的内存区域，这块内存区域能够容纳更多的数据。这不是在原有内存基础上直接扩展，而是分两个步骤完成：

1. **分配新内存**：根据当前需要的容量，在堀上分配一块新的、足够大的内存块。这块内存通常与原有内存块不在同一位置。

2. **复制或移动数据**：将原内存块中的数据复制（或者在 C++11 及以后使用移动语义时移动）到新分配的内存块。

3. **释放原内存**：复制或移动数据后，原来的内存块会被释放，因为它不再需要了。

在 `std::vector` 这样的动态数组中，当你添加元素导致容量不足时，通常会发生内存重新分配。例如，一个 `std::vector` 初始可能分配了空间以存储 8 个元素。当你尝试添加第 9 个元素时，容量不再足够，`vector` 就会自动进行内存重新分配来扩大其容量。这个过程不是在原来的内存上增加更多空间，而是整个动态数组被移动到一个全新的、更大的内存区域。

内存重新分配是一个相对昂贵的操作，因为它涉及到内存分配和数据拷贝（或移动）。出于性能考虑，`std::vector` 通常会采取“容量增长策略”（例如，每次增长到原来的两倍），以减少重新分配的次数。这就是为什么通常你会看到 `vector` 的容量是其大小的两倍或更多，这是预留空间以优化添加新元素时可能发生的重新分配操作。